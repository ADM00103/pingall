<!DOCTYPE html>
<html>
<head>
    <title>Ping Monitor</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 400px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }
        .controls {
            margin-bottom: 20px;
        }
        select, button {
            padding: 10px;
            font-size: 16px;
            margin: 10px;
        }
        .stats {
            text-align: left;
            background: #f0f0f0;
            padding: 15px;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>üì° Ping Monitor</h1>
    
    <div class="controls">
        <select id="serverSelect">
            <option value="vk.ru">vk.ru</option>
            <option value="ya.ru">ya.ru</option>
            <option value="youtube.com">youtube.com</option>
        </select>
        <button onclick="startPing()" id="startBtn">–°—Ç–∞—Ä—Ç</button>
        <button onclick="stopPing()" id="stopBtn" disabled>–°—Ç–æ–ø</button>
    </div>

    <div class="stats">
        <p>–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: <span id="sent">0</span></p>
        <p>–ü–æ—Ç–µ—Ä—è–Ω–æ: <span id="lost">0</span></p>
        <p>–ú–∏–Ω. –∑–∞–¥–µ—Ä–∂–∫–∞: <span id="min">--</span> –º—Å</p>
        <p>–°—Ä–µ–¥–Ω. –∑–∞–¥–µ—Ä–∂–∫–∞: <span id="avg">--</span> –º—Å</p>
        <p>–ú–∞–∫—Å. –∑–∞–¥–µ—Ä–∂–∫–∞: <span id="max">--</span> –º—Å</p>
    </div>

    <script>
        let sent = 0;
        let lost = 0;
        let latencies = [];
        let intervalId = null;

        function getRandomLatency() {
            // –≠–º—É–ª—è—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –ø–∏–Ω–≥–∞)
            return Math.floor(Math.random() * 100) + 30; // 30-130 –º—Å
        }

        function startPing() {
            if (intervalId) return; // –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

            const server = document.getElementById('serverSelect').value;
            document.getElementById('startBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;

            intervalId = setInterval(() => {
                sent++;
                // 10% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–∞
                if (Math.random() < 0.1) {
                    lost++;
                    document.getElementById('lost').textContent = lost;
                } else {
                    const latency = getRandomLatency();
                    latencies.push(latency);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                    document.getElementById('sent').textContent = sent;
                    document.getElementById('min').textContent = latencies.length > 0 ? Math.min(...latencies) : '--';
                    document.getElementById('max').textContent = latencies.length > 0 ? Math.max(...latencies) : '--';
                    const avg = latencies.length > 0 
                        ? (latencies.reduce((a, b) => a + b, 0) / latencies.length).toFixed(1) 
                        : '--';
                    document.getElementById('avg').textContent = avg;
                }
            }, 500); // –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∞–∫–µ—Ç–∞ –∫–∞–∂–¥—ã–µ 500 –º—Å
        }

        function stopPing() {
            if (intervalId) {
                clearInterval(intervalId);
                intervalId = null;
                document.getElementById('startBtn').disabled = false;
                document.getElementById('stopBtn').disabled = true;
            }
        }
    </script>
</body>
</html>